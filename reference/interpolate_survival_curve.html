<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Interpolate Survival Curve for a Range of Ages — interpolate_survival_curve • NeuroblastomaPSM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interpolate Survival Curve for a Range of Ages — interpolate_survival_curve"><meta name="description" content="This function fits a regression model to interpolate (calculate) the
probability of dying for a range of user-specified ages. The fitted model
regresses the cumulative hazard rate, which is transformed from the input
survival function (curve), on the corresponding age.
The cumulative hazard (\(H(t)\)) is related to the survival function
(\(S(t)\)) by:
$$H(t) = -\log(S(t))$$
where \(S(t)\) is the survival probability up to time \(t\)."><meta property="og:description" content="This function fits a regression model to interpolate (calculate) the
probability of dying for a range of user-specified ages. The fitted model
regresses the cumulative hazard rate, which is transformed from the input
survival function (curve), on the corresponding age.
The cumulative hazard (\(H(t)\)) is related to the survival function
(\(S(t)\)) by:
$$H(t) = -\log(S(t))$$
where \(S(t)\) is the survival probability up to time \(t\)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NeuroblastomaPSM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Implementing_cure_threshold.html">Implementing Cure Threshold</a></li>
    <li><a class="dropdown-item" href="../articles/Processing_IPD.html">Processing IPD</a></li>
    <li><a class="dropdown-item" href="../articles/PSM.html">Partition Survival Model</a></li>
    <li><a class="dropdown-item" href="../articles/Survival_functions.html">Survival functions</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/W-Mohammed/NeuroblastomaPSM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Interpolate Survival Curve for a Range of Ages</h1>
      <small class="dont-index">Source: <a href="https://github.com/W-Mohammed/NeuroblastomaPSM/blob/main/R/adjust_survival_curve.R" class="external-link"><code>R/adjust_survival_curve.R</code></a></small>
      <div class="d-none name"><code>interpolate_survival_curve.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function fits a regression model to interpolate (calculate) the
probability of dying for a range of user-specified ages. The fitted model
regresses the cumulative hazard rate, which is transformed from the input
survival function (curve), on the corresponding age.
The cumulative hazard (\(H(t)\)) is related to the survival function
(\(S(t)\)) by:
$$H(t) = -\log(S(t))$$
where \(S(t)\) is the survival probability up to time \(t\).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">interpolate_survival_curve</span><span class="op">(</span></span>
<span>  <span class="va">survival_curve_ages</span>,</span>
<span>  <span class="va">survival_curve</span>,</span>
<span>  <span class="va">target_ages</span>,</span>
<span>  interpolation_model <span class="op">=</span> <span class="st">"gam"</span>,</span>
<span>  smr_multiplier <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-survival-curve-ages">survival_curve_ages<a class="anchor" aria-label="anchor" href="#arg-survival-curve-ages"></a></dt>
<dd><p>A numeric vector representing the ages corresponding to the
survival probabilities.</p></dd>


<dt id="arg-survival-curve">survival_curve<a class="anchor" aria-label="anchor" href="#arg-survival-curve"></a></dt>
<dd><p>A numeric vector of mortality probabilities (the
probability of dying) corresponding to `age`.</p></dd>


<dt id="arg-target-ages">target_ages<a class="anchor" aria-label="anchor" href="#arg-target-ages"></a></dt>
<dd><p>A numeric vector of ages for which the hazard rates are to
be predicted.</p></dd>


<dt id="arg-interpolation-model">interpolation_model<a class="anchor" aria-label="anchor" href="#arg-interpolation-model"></a></dt>
<dd><p>A character string specifying the model to use for
fitting the log cumulative hazard. Options are "gam" (default) for
Generalized Additive Model and "spline" for spline model.</p></dd>


<dt id="arg-smr-multiplier">smr_multiplier<a class="anchor" aria-label="anchor" href="#arg-smr-multiplier"></a></dt>
<dd><p>A numeric value representing the Standardized Mortality
Ratio (SMR) multiplier. The SMR is used to adjust the mortality rates of the
population under study compared to a standard population. An SMR of 1
(default) indicates no difference in mortality rates, while an SMR greater
than 1 indicates higher mortality in the study population.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric vector of the interpolated survival function (curve).
ages.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Define age range and survival probabilities</span></span></span>
<span class="r-in"><span><span class="va">model_starting_age</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="va"><a href="l_psm_parameters.html">l_psm_parameters</a></span><span class="op">$</span><span class="va">age</span></span></span>
<span class="r-in"><span><span class="va">df_lifeTable</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="va"><a href="df_lifeTable_Jordan.html">df_lifeTable_Jordan</a></span></span></span>
<span class="r-in"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">df_lifeTable</span><span class="op">$</span><span class="va">`Age Group`</span></span></span>
<span class="r-in"><span><span class="va">mortality_probs</span> <span class="op">&lt;-</span> <span class="va">df_lifeTable</span><span class="op">$</span><span class="va">`Both sexes`</span></span></span>
<span class="r-in"><span><span class="va">mortality_probs</span> <span class="op">&lt;-</span> <span class="va">mortality_probs</span><span class="op">[</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="va">model_starting_age</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="va">age</span><span class="op">[</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="va">model_starting_age</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate the survival curve for the modeled cohort</span></span></span>
<span class="r-in"><span><span class="va">survival_curve</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="fu"><a href="get_lifeTable_survival_curve.html">get_lifeTable_survival_curve</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   mortality_probs <span class="op">=</span> <span class="va">mortality_probs</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define output ages</span></span></span>
<span class="r-in"><span><span class="va">target_ages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">model_starting_age</span>, <span class="fl">29</span>, <span class="fl">7</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interpolate Survival Curve</span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="fu">interpolate_survival_curve</span><span class="op">(</span></span></span>
<span class="r-in"><span>  survival_curve_ages <span class="op">=</span> <span class="va">age</span>,</span></span>
<span class="r-in"><span>  survival_curve <span class="op">=</span> <span class="va">survival_curve</span>,</span></span>
<span class="r-in"><span>  target_ages <span class="op">=</span> <span class="va">target_ages</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define output ages</span></span></span>
<span class="r-in"><span><span class="va">target_ages2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>, <span class="fl">7</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interpolate Survival Curve</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve2</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="fu">interpolate_survival_curve</span><span class="op">(</span></span></span>
<span class="r-in"><span>  survival_curve_ages <span class="op">=</span> <span class="va">age</span>,</span></span>
<span class="r-in"><span>  survival_curve <span class="op">=</span> <span class="va">survival_curve</span>,</span></span>
<span class="r-in"><span>  target_ages <span class="op">=</span> <span class="va">target_ages2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare fitted and observed survival curves</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">survival_curve</span>, xlab <span class="op">=</span> <span class="st">"Age"</span>, ylab <span class="op">=</span> <span class="st">"Survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve2</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interpolate Survival Curve with a SMR = 5.6</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve3</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="fu">interpolate_survival_curve</span><span class="op">(</span></span></span>
<span class="r-in"><span>  survival_curve_ages <span class="op">=</span> <span class="va">age</span>,</span></span>
<span class="r-in"><span>  survival_curve <span class="op">=</span> <span class="va">survival_curve</span>,</span></span>
<span class="r-in"><span>  target_ages <span class="op">=</span> <span class="va">target_ages2</span>,</span></span>
<span class="r-in"><span>  smr_multiplier <span class="op">=</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="va"><a href="l_psm_parameters.html">l_psm_parameters</a></span><span class="op">$</span><span class="va">smr_EFS</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare fitted and observed survival curves</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">survival_curve</span>, xlab <span class="op">=</span> <span class="st">"Age"</span>, ylab <span class="op">=</span> <span class="st">"Survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve2</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve3</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interpolate Survival Curve with a SMR = 5.6 * 1.9</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve4</span> <span class="op">&lt;-</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="fu">interpolate_survival_curve</span><span class="op">(</span></span></span>
<span class="r-in"><span>  survival_curve_ages <span class="op">=</span> <span class="va">age</span>,</span></span>
<span class="r-in"><span>  survival_curve <span class="op">=</span> <span class="va">survival_curve</span>,</span></span>
<span class="r-in"><span>  target_ages <span class="op">=</span> <span class="va">target_ages2</span>,</span></span>
<span class="r-in"><span>  smr_multiplier <span class="op">=</span> <span class="fu">NeuroblastomaPSM</span><span class="fu">::</span><span class="va"><a href="l_psm_parameters.html">l_psm_parameters</a></span><span class="op">$</span><span class="va">smr_PPS</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">v_interpolated_curve4</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compare fitted and observed survival curves</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span>, y <span class="op">=</span> <span class="va">survival_curve</span>, xlab <span class="op">=</span> <span class="st">"Age"</span>, ylab <span class="op">=</span> <span class="st">"Survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve2</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve3</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">target_ages2</span>, y <span class="op">=</span> <span class="va">v_interpolated_curve4</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Wael Mohammed.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

