<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Processing IPD • NeuroblastomaPSM</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Processing IPD">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">NeuroblastomaPSM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Implementing_cure_threshold.html">Implementing Cure Threshold</a></li>
    <li><a class="dropdown-item" href="../articles/Processing_IPD.html">Processing IPD</a></li>
    <li><a class="dropdown-item" href="../articles/PSM.html">Partition Survival Model</a></li>
    <li><a class="dropdown-item" href="../articles/Survival_functions.html">Survival functions</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/W-Mohammed/NeuroblastomaPSM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Processing IPD</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/W-Mohammed/NeuroblastomaPSM/blob/main/vignettes/Processing_IPD.Rmd" class="external-link"><code>vignettes/Processing_IPD.Rmd</code></a></small>
      <div class="d-none name"><code>Processing_IPD.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction:<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In survival analysis, individual patient data (IPD) is often
considered the gold standard. However, when IPD is not available,
researchers sometimes have to rely on aggregate data presented in
published articles, which often include Kaplan-Meier survival curves.
Digitization of these graphs is a method used to extract approximate IPD
from published survival plots, enabling more detailed and flexible
analyses than would be possible with aggregate data alone.</p>
<p>The process of digitizing graphs to obtain IPD involves several
steps:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Graph Identification and Selection</strong>: The first
step involves identifying and selecting the Kaplan-Meier survival curves
or other relevant survival graphs from the published literature that you
wish to digitize.</p></li>
<li><p><strong>Preparation for Digitization</strong>: This usually
involves scanning, downloading, or taking a high-resolution screenshot
of the graph if it’s in digital format. The image should be clear and
large enough to accurately identify and mark the data points.</p></li>
<li><p><strong>Using Digitization Software</strong>: There are various
software tools available for digitizing graphs (e.g., WebPlotDigitizer,
DigitizeIt, PlotDigitizer). These tools allow the user to upload the
graph image, calibrate the axes by marking known points (e.g., time and
survival probability axes), and then manually or automatically extract
the data points from the graph. The software translates the positions of
these points into coordinates based on the calibration.</p></li>
<li><p><strong>Data Extraction</strong>: By clicking on or hovering over
the curve at various points, the digitization software captures the
coordinates, which correspond to the time (on the X-axis) and the
survival probability (on the Y-axis) or other relevant metrics. This
step is critical and requires careful attention to ensure accuracy,
especially at key points such as censored data marks or where there are
significant changes in the slope of the curve.</p></li>
<li><p><strong>Exporting and Cleaning the Data</strong>: The extracted
data points can then be exported to data analysis software or
spreadsheets for further cleaning and analysis. This may involve
interpolating between points, dealing with censored observations, and
converting the survival probabilities into an approximate IPD.</p></li>
<li><p><strong>Statistical Analysis</strong>: With the digitized data,
researchers can perform various survival analyses, such as estimating
survival rates at specific times, comparing survival curves, or even
conducting individual-level meta-analyses if data from multiple studies
are digitized.</p></li>
<li><p><strong>Validation and Sensitivity Analysis</strong>: It’s
crucial to validate the digitized data against published results (if
available) to ensure accuracy. Additionally, sensitivity analyses may be
conducted to assess how variations in the digitization process (e.g.,
differences in point selection) might affect the results.</p></li>
</ol>
<p>This process allows researchers to overcome the limitations of not
having access to IPD and enables more comprehensive analyses than would
be possible with only aggregate survival data. However, it’s important
to acknowledge that digitized data may not capture all the nuances of
the original IPD and that this method involves approximation. Therefore,
results derived from digitized data should be interpreted with caution
and, where possible, validated against other sources.</p>
<p>This vignette documents the process succeeding the digitization
process. The aim of this process is to combine the data from different
curves into a single dataset.</p>
</div>
<div class="section level2">
<h2 id="combining-datasets">Combining datasets:<a class="anchor" aria-label="anchor" href="#combining-datasets"></a>
</h2>
<p>The following code chunk documents how the IPD from each of the
survival curves were combined into a single dataset. The combined
dataset was then saved in the package for further analysis. The chunk
code below is meant to reflect one part of the package development;
therefore, users/readers of this vignette are advised not to execute the
following chunk code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">IPD_curves_data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"data/"</span><span class="op">)</span></span>
<span><span class="va">treatments_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Iso"</span>, <span class="st">"Deni"</span><span class="op">)</span></span>
<span><span class="va">curves_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"OS"</span>, <span class="st">"EFS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">IPD_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  X <span class="op">=</span> <span class="va">treatments_codes</span>,</span>
<span>  FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">treatment_cd</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">treatments_file_names</span> <span class="op">&lt;-</span> <span class="va">IPD_curves_data_path</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span></span>
<span>      pattern <span class="op">=</span> <span class="va">treatment_cd</span>,</span>
<span>      x <span class="op">=</span> <span class="va">IPD_curves_data_path</span></span>
<span>    <span class="op">)</span><span class="op">]</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>      X <span class="op">=</span> <span class="va">curves_codes</span>,</span>
<span>      FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">curve_cd</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">target_file</span> <span class="op">&lt;-</span> <span class="va">treatments_file_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span></span>
<span>          pattern <span class="op">=</span> <span class="va">curve_cd</span>,</span>
<span>          x <span class="op">=</span> <span class="va">treatments_file_names</span></span>
<span>        <span class="op">)</span><span class="op">]</span></span>
<span>        <span class="co"># Read identified file:</span></span>
<span>        <span class="va">ipd_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"data/"</span>, <span class="va">target_file</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span></span>
<span>            <span class="st">"trt_cd"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">treatment_cd</span> <span class="op">==</span> <span class="st">"Iso"</span>, <span class="st">"TT"</span>, <span class="st">"GD2"</span><span class="op">)</span>,</span>
<span>            <span class="st">"curve"</span> <span class="op">=</span> <span class="va">curve_cd</span></span>
<span>          <span class="op">)</span></span>
<span>      <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>        what <span class="op">=</span> <span class="va">rbind</span>,</span>
<span>        args <span class="op">=</span> <span class="va">_</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span></span>
<span>    what <span class="op">=</span> <span class="va">rbind</span>,</span>
<span>    args <span class="op">=</span> <span class="va">_</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">IPD_data</span><span class="op">[[</span><span class="st">"treatment"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  test <span class="op">=</span> <span class="va">IPD_data</span><span class="op">$</span><span class="va">trt_cd</span> <span class="op">==</span> <span class="st">"TT"</span>,</span>
<span>  yes <span class="op">=</span> <span class="st">"Isotretinoin"</span>,</span>
<span>  no <span class="op">=</span> <span class="st">"Dinutuximab β"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">IPD_data</span> <span class="op">&lt;-</span> <span class="va">IPD_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">`colnames&lt;-`</span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">_</span>,</span>
<span>    value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trt"</span>, <span class="st">"trt_cd"</span>, <span class="st">"curve"</span>, <span class="st">"eventtime"</span>, <span class="st">"event"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">IPD_data</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">IPD_data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Wael Mohammed.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
